version: '3'

services:
  discovery-eureka:
    image: utopiandrmer/compi-discovery-eureka
    environment:
      - active_profile=dev
    ports:
      - 8761:8761
    networks:
      - comp-net

  api-gateway:
    image: utopiandrmer/compi-api-gateway
    environment:
      - active_profile=dev
    ports:
      - 8000:8000
    networks:
      - comp-net
    depends_on:
      - mysql
      - redis

  auth-service:
    image: utopiandrmer/compi-auth-service
    environment:
      - active_profile=dev
    ports:
      - 8081:8080
    networks:
      - comp-net
    depends_on:
      - mysql
      - redis

  board-service:
    image: utopiandrmer/compi-board-service
    environment:
      - active_profile=dev
    ports:
      - 8082:8080
    networks:
      - comp-net
    depends_on:
      - mysql
      - redis

  mysql:
    image: mysql
    environment:
      - MYSQL_ROOT_PASSWORD=1234
      - MYSQL_DATABASE=comp
    ports:
      - 3306:3306
    networks:
      - comp-net

  redis:
    image: redis
    ports:
      - 6379:6379
    environment:
      - REDIS_PASSWORD=1234
    networks:
      - comp-net

networks:
  comp-net:
